import{r as i,j as e}from"./index-BNIPZIKr.js";import{R,a as y,u as h,A as w,V as z,S as C,b as E,C as F,c as P}from"./react-three-fiber.esm-C_AlISlk.js";import{F as I}from"./Float-BJlKjaUo.js";const _=()=>parseInt(R.replace(/\D+/g,"")),L=_();class T extends E{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${L>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const k=t=>new z().setFromSpherical(new C(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),G=i.forwardRef(({radius:t=100,depth:s=50,count:r=5e3,saturation:o=0,factor:n=4,fade:a=!1,speed:l=1},d)=>{const c=i.useRef(),[u,p,x]=i.useMemo(()=>{const m=[],b=[],S=Array.from({length:r},()=>(.5+.5*Math.random())*n),g=new y;let M=t+s;const A=s/r;for(let v=0;v<r;v++)M-=A*Math.random(),m.push(...k(M).toArray()),g.setHSL(v/r,o,.9),b.push(g.r,g.g,g.b);return[new Float32Array(m),new Float32Array(b),new Float32Array(S)]},[r,s,n,t,o]);h(m=>c.current&&(c.current.uniforms.time.value=m.clock.getElapsedTime()*l));const[f]=i.useState(()=>new T);return i.createElement("points",{ref:d},i.createElement("bufferGeometry",null,i.createElement("bufferAttribute",{attach:"attributes-position",args:[u,3]}),i.createElement("bufferAttribute",{attach:"attributes-color",args:[p,3]}),i.createElement("bufferAttribute",{attach:"attributes-size",args:[x,1]})),i.createElement("primitive",{ref:c,object:f,attach:"material",blending:w,"uniforms-fade-value":a,depthWrite:!1,transparent:!0,vertexColors:!0}))}),V=({position:t,scale:s,color:r,speed:o,rotationSpeed:n})=>{const a=i.useRef(),l=i.useMemo(()=>[...t],[t]);return h(d=>{if(!a.current)return;const c=d.clock.elapsedTime;a.current.position.y=l[1]+Math.sin(c*o)*.3,a.current.position.x=l[0]+Math.sin(c*o*.5)*.2,a.current.rotation.x+=n*.01,a.current.rotation.y+=n*.015,a.current.rotation.z+=n*.008}),e.jsxs("mesh",{ref:a,position:t,scale:s,children:[e.jsx("octahedronGeometry",{args:[1,0]}),e.jsx("meshStandardMaterial",{color:r,transparent:!0,opacity:.6,wireframe:!0,emissive:r,emissiveIntensity:.3})]})},D=()=>{const t=i.useRef(),s=i.useRef({x:0,y:0}),{viewport:r}=P();return i.useEffect(()=>{const o=n=>{const a=n.clientX/window.innerWidth*2-1,l=-(n.clientY/window.innerHeight)*2+1;s.current={x:a*r.width*.4,y:l*r.height*.4}};return window.addEventListener("mousemove",o),()=>window.removeEventListener("mousemove",o)},[r]),h(()=>{t.current&&(t.current.position.x+=(s.current.x-t.current.position.x)*.05,t.current.position.y+=(s.current.y-t.current.position.y)*.05)}),e.jsxs("mesh",{ref:t,position:[0,0,-2],children:[e.jsx("sphereGeometry",{args:[1.2,32,32]}),e.jsx("meshStandardMaterial",{color:"#8b5cf6",transparent:!0,opacity:.08,emissive:"#8b5cf6",emissiveIntensity:.3})]})},B=({count:t=200})=>{const s=i.useRef(),r=i.useMemo(()=>{const o=new Float32Array(t*3),n=new Float32Array(t*3),a=new Float32Array(t),l=new y("#8b5cf6"),d=new y("#06b6d4");for(let c=0;c<t;c++){const u=c*3,p=Math.random()*15+5,x=Math.random()*Math.PI*2,f=Math.acos(Math.random()*2-1);o[u]=p*Math.sin(f)*Math.cos(x),o[u+1]=p*Math.sin(f)*Math.sin(x),o[u+2]=p*Math.cos(f)-10;const m=l.clone().lerp(d,Math.random());n[u]=m.r,n[u+1]=m.g,n[u+2]=m.b,a[c]=Math.random()*3+1}return{positions:o,colors:n,sizes:a}},[t]);return h(o=>{if(!s.current)return;const n=o.clock.elapsedTime;s.current.rotation.y=n*.02,s.current.rotation.x=Math.sin(n*.01)*.1}),e.jsxs("points",{ref:s,children:[e.jsxs("bufferGeometry",{children:[e.jsx("bufferAttribute",{attach:"attributes-position",count:r.positions.length/3,array:r.positions,itemSize:3}),e.jsx("bufferAttribute",{attach:"attributes-color",count:r.colors.length/3,array:r.colors,itemSize:3})]}),e.jsx("pointsMaterial",{size:.08,vertexColors:!0,transparent:!0,opacity:.8,sizeAttenuation:!0,blending:w})]})},j=({position:t,color:s,scale:r=1})=>{const o=i.useRef();return h(n=>{if(!o.current)return;const a=n.clock.elapsedTime;o.current.rotation.x=a*.3,o.current.rotation.y=a*.2}),e.jsxs("mesh",{ref:o,position:t,scale:r,children:[e.jsx("torusGeometry",{args:[1,.02,16,100]}),e.jsx("meshStandardMaterial",{color:s,transparent:!0,opacity:.4,emissive:s,emissiveIntensity:.5})]})},H=()=>{const t=i.useMemo(()=>[{position:[-6,-2,-8],scale:.5,color:"#8b5cf6",speed:.8,rotationSpeed:1},{position:[7,-3,-10],scale:.7,color:"#06b6d4",speed:.6,rotationSpeed:.8},{position:[-4,-5,-12],scale:.4,color:"#a855f7",speed:1,rotationSpeed:1.2},{position:[5,-1,-9],scale:.6,color:"#22d3ee",speed:.7,rotationSpeed:.9},{position:[0,-6,-11],scale:.45,color:"#8b5cf6",speed:.9,rotationSpeed:1.1},{position:[-7,-4,-14],scale:.55,color:"#06b6d4",speed:.5,rotationSpeed:.7},{position:[8,-2,-13],scale:.35,color:"#a855f7",speed:1.1,rotationSpeed:1.3}],[]);return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.4}),e.jsx("pointLight",{position:[10,10,10],intensity:.4,color:"#8b5cf6"}),e.jsx("pointLight",{position:[-10,-10,-10],intensity:.2,color:"#06b6d4"}),e.jsx(G,{radius:50,depth:50,count:800,factor:2,saturation:.3,fade:!0,speed:.3}),e.jsx(B,{count:200}),t.map((s,r)=>e.jsx(I,{speed:1.5,rotationIntensity:.5,floatIntensity:.5,children:e.jsx(V,{...s})},r)),e.jsx(j,{position:[-3,-2,-6],color:"#8b5cf6",scale:1.8}),e.jsx(j,{position:[4,-4,-8],color:"#06b6d4",scale:1.4}),e.jsx(D,{})]})},X=()=>e.jsx("div",{className:"portfolio-3d-bg",children:e.jsx(F,{camera:{position:[0,0,5],fov:60},dpr:[1,2],gl:{antialias:!0,alpha:!0},children:e.jsx(H,{})})});export{X as default};
